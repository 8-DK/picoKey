<style>*{background-color:#352e2e;font-family:monospace;color:#3cff01;padding:0}button,datalist{background-color:#555}input[type=text]{color:#b3ffb3;background-color:#665656;border:1px solid;border-color:#696 #363 #363 #696}#serialResults{font-family:monospace;white-space:pre;height:calc(100% - 120px);width:calc(100% - 20px);border-style:solid;overflow:scroll;background-color:#585c5c;padding:10px;margin:0}</style>
<button onclick="connectSerial()">Connect</button>
Baud:
<input type="text" id="baud" list="baudList" style="width: 10ch;" onclick="this.value = ''"
    onchange="localStorage.baud = this.value">
<datalist id="baudList">
    <option value="110">110</option>
    <option value="300">300</option>
    <option value="600">600</option>
    <option value="1200">1200</option>
    <option value="2400">2400</option>
    <option value="4800">4800</option>
    <option value="9600">9600</option>
    <option value="14400">14400</option>
    <option value="19200">19200</option>
    <option value="38400">38400</option>
    <option value="57600">57600</option>
    <option value="115200">115200</option>
    <option value="128000">128000</option>
    <option value="256000">256000</option>
</datalist>
<button onclick="serialResultsDiv.innerHTML = '';">Clear</button>
<br>
<input type="text" id="lineToSend" style="width:calc(100% - 165px)">
<button onclick="sendSerialLine()" style="width:45px">Send</button>
<button onclick="sendCharacterNumber()" style="width:100px">Send Char</button>
<br>
<input type="checkbox" id="addLine" onclick="localStorage.addLine = this.checked;" checked>
<label for="addLine">send with /r/n</label>
<input type="checkbox" id="echoOn" onclick="localStorage.echoOn = this.checked;" checked>
<label for="echoOn">echo</label>
<br>
<div id="serialResults">
</div>
<script>var port,textEncoder,writableStreamClosed,writer;async function connectSerial(){try{port=await navigator.serial.requestPort(),await port.open({baudRate:document.getElementById("baud").value}),listenToPort(),textEncoder=new TextEncoderStream,writableStreamClosed=textEncoder.readable.pipeTo(port.writable),writer=textEncoder.writable.getWriter()}catch{alert("Serial Connection Failed")}}async function sendCharacterNumber(){document.getElementById("lineToSend").value=String.fromCharCode(document.getElementById("lineToSend").value)}async function sendSerialLine(){dataToSend=document.getElementById("lineToSend").value,1==document.getElementById("addLine").checked&&(dataToSend+="\r\n"),1==document.getElementById("echoOn").checked&&appendToTerminal("> "+dataToSend),await writer.write(dataToSend),document.getElementById("lineToSend").value=""}async function listenToPort(){const e=new TextDecoderStream,t=(port.readable.pipeTo(e.writable),e.readable.getReader());for(;;){const{value:e,done:n}=await t.read();if(n)break;appendToTerminal(e)}}const serialResultsDiv=document.getElementById("serialResults");async function appendToTerminal(e){serialResultsDiv.innerHTML+=e,serialResultsDiv.innerHTML.length>3e3&&(serialResultsDiv.innerHTML=serialResultsDiv.innerHTML.slice(serialResultsDiv.innerHTML.length-3e3)),serialResultsDiv.scrollTop=serialResultsDiv.scrollHeight}document.getElementById("lineToSend").addEventListener("keyup",async function(e){13===e.keyCode&&sendSerialLine()}),document.getElementById("baud").value=null==localStorage.baud?9600:localStorage.baud,document.getElementById("addLine").checked="false"!=localStorage.addLine,document.getElementById("echoOn").checked="false"!=localStorage.echoOn;</script>